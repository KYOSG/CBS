<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-/mybatis.org/DTD Mapper 3.0/EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.ky.ClassBrrowSystem.dao.RoomBorrowedInfoDAO">

    <resultMap id="roomInfoMap" type="RoomBorrowedInfo">
        <id column="logId" property="logId"/>
        <result column="borrow_room_id" property="borrowRoomId"/>
        <result column="borrow_user_id" property="borrowUserId"/>
        <result column="borrow_time_id" property="borrowTimeId"/>
        <result column="borrow_date" property="borrowDate"/>
        <result column="borrow_reason" property="borrowReason"/>
        <result column="apply_time" property="applyTime"/>
        <result column="isNeedMedia" property="isNeedMedia"/>
        <result column="isAdmit" property="isAdmit"/>
    </resultMap>

    <!--Query-->
    <select id="queryRBIByRoomId" resultMap="roomInfoMap">
        select logId,borrow_room_id,borrow_user_id,borrow_time_id,borrow_date,borrow_reason,apply_time,isNeedMedia,isAdmit
        from RBS.borrowInfo
        where borrow_room_id = #{roomId}
    </select>

    <select id="queryRBIByUserId" resultMap="roomInfoMap">
        select logId,borrow_room_id,borrow_user_id,borrow_time_id,borrow_date,borrow_reason,apply_time,isNeedMedia,isAdmit
        from RBS.borrowInfo
        where borrow_user_id = #{userId}
    </select>

    <select id="queryRBIByTime" resultMap="roomInfoMap">
        select logId,borrow_room_id,borrow_user_id,borrow_time_id,borrow_date,borrow_reason,apply_time,isNeedMedia,isAdmit
        from RBS.borrowInfo
        where borrow_date = #{arg0} and borrow_time_id = #{arg1}
    </select>

    <select id="queryRBIByTimeAndRoomId" resultMap="roomInfoMap">
        select logId,borrow_room_id,borrow_user_id,borrow_time_id,borrow_date,borrow_reason,apply_time,isNeedMedia,isAdmit
        from RBS.borrowInfo
        where borrow_time_id = #{arg0} and borrow_date = #{arg1} and borrow_room_id = #{arg2}
    </select>
<!--    查询某教室某时间之后的借用信息-->




    <!--Operator-->
    <insert id="borrow">
        INSERT INTO RBS.borrowInfo (logId, borrow_room_id, borrow_time_id, borrow_date, borrow_reason, apply_time, borrow_user_id)
        VALUE (#{RBI.borrow_roomid},#{RBI.borrow_time_id},#{RBI.borrow_date},#{RBI.borrow_reason},#{RBI.apply_time},#{RBI.borrow_user_id})
    </insert>

    <select id="cancel" resultMap="roomInfoMap">

    </select>



</mapper>